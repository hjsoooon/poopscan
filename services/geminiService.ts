import { PoopAnalysisResult } from "../types";

// í˜„ì¬ ì‹œê°„ í¬ë§·íŒ…
const getCurrentTime = () => {
  const now = new Date();
  return now.toLocaleString('ko-KR', { 
    month: 'long', 
    day: 'numeric', 
    hour: '2-digit', 
    minute: '2-digit' 
  });
};

// ëœë¤ ê²°ê³¼ ë°ì´í„° (ì—„ë§ˆ ì¹œí™”ì  UI)
const mockResults: PoopAnalysisResult[] = [
  {
    status: 'normal',
    statusLabel: 'ì •ìƒ',
    description: 'ê±´ê°•í•œ ìƒíƒœì˜ ëŒ€ë³€ì…ë‹ˆë‹¤.',
    friendlyHeadline: 'ì˜¤ëŠ˜ ìš°ë¦¬ ì•„ê¸° ì¥ì´ ì•„ì£¼ íŠ¼íŠ¼í•´ìš”!',
    friendlyEmoji: 'â˜€ï¸',
    color: 'í™©ê¸ˆìƒ‰',
    colorHex: '#DAA520',
    colorFriendly: 'í™©ê¸ˆë³€',
    consistency: 'ë¶€ë“œëŸ¬ì›€',
    frequencyToday: 3,
    poopShape: 'ğŸŒ ë°”ë‚˜ë‚˜',
    poopShapeDesc: 'ì•„ì£¼ ê±´ê°•í•´ìš”',
    amount: 'ë³´í†µ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ì–‘í˜¸',
    bristolType: 4,
    hydrationAdvice: 'ìˆ˜ë¶„ ì„­ì·¨ ì¶©ë¶„í•´ìš”! ì§€ê¸ˆì²˜ëŸ¼ ìœ ì§€í•´ ì£¼ì„¸ìš” ğŸ’§',
    careAdvice: ['í˜„ì¬ ìˆ˜ìœ  íŒ¨í„´ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì„¸ìš”', 'ì•„ê¸°ì™€ ëˆˆ ë§ì¶”ë©° ìˆ˜ìœ í•˜ë©´ ë” ì¢‹ì•„ìš”'],
    hospitalAdvice: null,
    insight: 'ëª¨ìœ  ìˆ˜ìœ  ì•„ê¸°ì—ê²Œ í”íˆ ë³´ì´ëŠ” ê±´ê°•í•œ ëŒ€ë³€ì´ì—ìš”. ì—„ë§ˆ ì –ì´ ì•„ê¸°ì—ê²Œ ë”± ë§ê³  ìˆë‹¤ëŠ” ì¦ê±°ì˜ˆìš”!',
    recommendations: ['í˜„ì¬ ìˆ˜ìœ  íŒ¨í„´ ìœ ì§€', 'ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨'],
    warningSigns: [],
    analysisTime: getCurrentTime(),
    confidenceScore: 94
  },
  {
    status: 'normal',
    statusLabel: 'ì •ìƒ',
    description: 'ì •ìƒì ì¸ ëŒ€ë³€ ìƒ‰ìƒê³¼ ë†ë„ì…ë‹ˆë‹¤.',
    friendlyHeadline: 'ì†Œí™”ê°€ ì•„ì£¼ ì˜ ë˜ê³  ìˆì–´ìš”!',
    friendlyEmoji: 'âœ¨',
    color: 'ê²¨ììƒ‰',
    colorHex: '#E1AD01',
    colorFriendly: 'ê²¨ìë³€',
    consistency: 'í¬ë¦¼í˜•',
    frequencyToday: 4,
    poopShape: 'ğŸŒ ë°”ë‚˜ë‚˜',
    poopShapeDesc: 'ê±´ê°•í•´ìš”',
    amount: 'ë³´í†µ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ì–‘í˜¸',
    bristolType: 5,
    hydrationAdvice: 'ìˆ˜ë¶„ ìƒíƒœ ì¢‹ì•„ìš”! ê³„ì† ì˜ ì±™ê²¨ì£¼ì„¸ìš” ğŸ‘',
    careAdvice: ['ê·œì¹™ì ì¸ ìˆ˜ìœ  ì‹œê°„ì„ ìœ ì§€í•´ ì£¼ì„¸ìš”', 'ë°°ë³€ ì¼ì§€ë¥¼ ê¸°ë¡í•˜ë©´ íŒ¨í„´ì„ íŒŒì•…í•˜ê¸° ì¢‹ì•„ìš”'],
    hospitalAdvice: null,
    insight: 'ê²¨ììƒ‰ í¬ë¦¼í˜• ë³€ì€ ëª¨ìœ  ìˆ˜ìœ  ì•„ê¸°ì˜ ì „í˜•ì ì¸ ê±´ê°• ë³€ì´ì—ìš”. ì•„ê¸° ì¥ì´ íŠ¼íŠ¼í•˜ë‹¤ëŠ” ì‹ í˜¸!',
    recommendations: ['ê·œì¹™ì ì¸ ìˆ˜ìœ ', 'ë°°ë³€ ì¼ì§€ ì‘ì„±'],
    warningSigns: [],
    analysisTime: getCurrentTime(),
    confidenceScore: 91
  },
  {
    status: 'normal',
    statusLabel: 'ì •ìƒ',
    description: 'ë…¹ìƒ‰ë¹›ì´ ì•½ê°„ ìˆì§€ë§Œ ì •ìƒ ë²”ìœ„ì…ë‹ˆë‹¤.',
    friendlyHeadline: 'ë…¹ë³€ì´ì§€ë§Œ ê±±ì • ë§ˆì„¸ìš”, ì •ìƒì´ì—ìš”!',
    friendlyEmoji: 'ğŸŒ¿',
    color: 'ë…¹í™©ìƒ‰',
    colorHex: '#9ACD32',
    colorFriendly: 'ë…¹ë³€ (ì •ìƒ)',
    consistency: 'ë³´í†µ',
    frequencyToday: 2,
    poopShape: 'ğŸŒ ë°”ë‚˜ë‚˜',
    poopShapeDesc: 'ê±´ê°•í•´ìš”',
    amount: 'ë³´í†µ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ì–‘í˜¸',
    bristolType: 4,
    hydrationAdvice: 'ìˆ˜ë¶„ ì¶©ë¶„í•´ìš” ğŸ’§',
    careAdvice: ['ì „ìœ (ë¬½ì€ ì –)ë¥¼ ë§ì´ ë¨¹ìœ¼ë©´ ë…¹ìƒ‰ì´ ë  ìˆ˜ ìˆì–´ìš”', 'í•œìª½ ì –ì„ ì¶©ë¶„íˆ ë¨¹ì¸ í›„ ë°”ê¿”ì£¼ì„¸ìš”'],
    hospitalAdvice: null,
    insight: 'ë…¹ìƒ‰ë¹›ì€ ë‹´ì¦™ ìƒ‰ì†Œ ë•Œë¬¸ì´ê³  ì •ìƒì´ì—ìš”. ì „ìœ ë¥¼ ë§ì´ ë¨¹ê±°ë‚˜ ì¥ í†µê³¼ê°€ ë¹ ë¥´ë©´ ë‚˜íƒ€ë‚˜ìš”.',
    recommendations: ['ìˆ˜ìœ  ì‹œê°„ ì¶©ë¶„íˆ', 'í•œìª½ ì – ì™„ì „íˆ ë¹„ìš°ê¸°'],
    warningSigns: [],
    analysisTime: getCurrentTime(),
    confidenceScore: 88
  },
  {
    status: 'caution',
    statusLabel: 'ê´€ì°° í•„ìš”',
    description: 'ì•½ê°„ ë¬½ì€ í¸ì´ë‹ˆ ê´€ì°°ì´ í•„ìš”í•´ìš”.',
    friendlyHeadline: 'ì¥ì´ ì¡°ê¸ˆ ì˜ˆë¯¼í•œ ê²ƒ ê°™ì•„ìš”',
    friendlyEmoji: 'ğŸ’§',
    color: 'ë…¸ë€ìƒ‰',
    colorHex: '#EAB308',
    colorFriendly: 'ë…¸ë€ ë¬¼ë³€',
    consistency: 'ë¬½ìŒ',
    frequencyToday: 6,
    poopShape: 'ğŸš ë¬½ì€ ì£½',
    poopShapeDesc: 'ì„¤ì‚¬ ê¸°ìš´ì´ ìˆì–´ìš”',
    amount: 'ë§ìŒ',
    hasMucus: true,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ì£¼ì˜',
    bristolType: 6,
    hydrationAdvice: 'ìˆ˜ë¶„ì´ ë¹ ì ¸ë‚˜ê°€ê³  ìˆì–´ìš”! í‰ì†Œë³´ë‹¤ ìˆ˜ìœ ë¥¼ ìì£¼, ì¡°ê¸ˆì”© í•´ì£¼ì„¸ìš” ğŸš°',
    careAdvice: ['ëª¨ìœ /ë¶„ìœ ë¥¼ ì¡°ê¸ˆì”© ìì£¼ ë¨¹ì—¬ì£¼ì„¸ìš”', 'ì „í•´ì§ˆ ìš©ì•¡(í˜ë””ë¼ì´íŠ¸)ì„ ê³ ë ¤í•´ ë³´ì„¸ìš”', 'ê¸°ì €ê·€ ë°œì§„ ì˜ˆë°© í¬ë¦¼ì„ ë°œë¼ì£¼ì„¸ìš”'],
    hospitalAdvice: 'íƒˆìˆ˜ ì¦ìƒ(ëˆˆë¬¼ ì—†ì´ ìš¸ê¸°, ì†Œë³€ ì¤„ì–´ë“¦, ì…ìˆ  ë§ˆë¦„)ì´ ë³´ì´ë©´ ì†Œì•„ê³¼ì— ê°€ì„¸ìš”',
    insight: 'ì ì•¡ì´ ì¡°ê¸ˆ ë³´ì´ê³  ë°°ë³€ íšŸìˆ˜ê°€ ë§ì•„ìš”. ì¥ì´ ì˜ˆë¯¼í•´ì§„ ìƒíƒœë‹ˆê¹Œ ìˆ˜ë¶„ ì„­ì·¨ì— ì‹ ê²½ ì¨ì£¼ì„¸ìš”!',
    recommendations: ['ìˆ˜ë¶„ ë³´ì¶©', 'ì»¨ë””ì…˜ ê´€ì°°'],
    warningSigns: ['ì ì•¡ ì†ŒëŸ‰ ë°œê²¬'],
    analysisTime: getCurrentTime(),
    confidenceScore: 85
  },
  {
    status: 'caution',
    statusLabel: 'ê´€ì°° í•„ìš”',
    description: 'ë‹¨ë‹¨í•œ í¸ì´ë‹ˆ ìˆ˜ë¶„ ì„­ì·¨ë¥¼ ëŠ˜ë ¤ì£¼ì„¸ìš”.',
    friendlyHeadline: 'ë³€ë¹„ ê¸°ìš´ì´ ìˆì–´ìš”, ë¬¼ì„ ë” ì±™ê²¨ì£¼ì„¸ìš”!',
    friendlyEmoji: 'ğŸ°',
    color: 'ì§„ê°ˆìƒ‰',
    colorHex: '#8B4513',
    colorFriendly: 'ê°ˆìƒ‰ë³€',
    consistency: 'ë”±ë”±í•¨',
    frequencyToday: 1,
    poopShape: 'ğŸ° í† ë¼ë˜¥',
    poopShapeDesc: 'ë³€ë¹„ ê¸°ìš´ì´ ìˆì–´ìš”',
    amount: 'ì†ŒëŸ‰',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: true,
    hydration: 'ë³´í†µ',
    bristolType: 2,
    hydrationAdvice: 'ë¬¼ì„ í•œ ì»µ ë” ì±™ê²¨ì£¼ì„¸ìš”! ìˆ˜ë¶„ì´ ë¶€ì¡±í•´ ë³´ì—¬ìš” ğŸ’§',
    careAdvice: ['ë°° ë§ˆì‚¬ì§€ë¥¼ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 3ë¶„ê°„ í•´ì£¼ì„¸ìš” ğŸ”„', 'ë‹¤ë¦¬ë¥¼ ìì „ê±° íƒ€ë“¯ ì›€ì§ì—¬ ì£¼ì„¸ìš”', 'ì´ìœ ì‹ ì¤‘ì´ë¼ë©´ ìˆ˜ë¶„ê¸° ìˆëŠ” ìŒì‹ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”'],
    hospitalAdvice: '3ì¼ ì´ìƒ ë³€ì„ ëª» ë³´ê±°ë‚˜ ë°°ê°€ ë§ì´ ë¹µë¹µí•˜ë©´ ì†Œì•„ê³¼ì— ê°€ì„¸ìš”',
    insight: 'ë³€ì´ ë”±ë”±í•˜ê³  í† ë¼ë˜¥ì²˜ëŸ¼ ì‘ê²Œ ë‚˜ì™”ì–´ìš”. ìˆ˜ë¶„ ì„­ì·¨ë¥¼ ëŠ˜ë¦¬ê³  ë°° ë§ˆì‚¬ì§€ë¥¼ í•´ì£¼ë©´ ì¢‹ì•„ì§ˆ ê±°ì˜ˆìš”!',
    recommendations: ['ë¬¼ ì„­ì·¨ëŸ‰ ëŠ˜ë¦¬ê¸°', 'ë°° ë§ˆì‚¬ì§€'],
    warningSigns: ['ë³€ë¹„ ì§•í›„'],
    analysisTime: getCurrentTime(),
    confidenceScore: 82
  },
  {
    status: 'normal',
    statusLabel: 'ì •ìƒ',
    description: 'ì´ìœ ì‹ ì•„ê¸°ì˜ ì •ìƒì ì¸ ëŒ€ë³€ì´ì—ìš”.',
    friendlyHeadline: 'ì´ìœ ì‹ ì˜ ì†Œí™”í•˜ê³  ìˆì–´ìš”!',
    friendlyEmoji: 'ğŸ¥„',
    color: 'ì—°ê°ˆìƒ‰',
    colorHex: '#D2691E',
    colorFriendly: 'ê°ˆìƒ‰ë³€',
    consistency: 'ì„±í˜•ë¨',
    frequencyToday: 2,
    poopShape: 'ğŸŒ ë°”ë‚˜ë‚˜',
    poopShapeDesc: 'ê±´ê°•í•´ìš”',
    amount: 'ë³´í†µ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: true,
    hydration: 'ì–‘í˜¸',
    bristolType: 4,
    hydrationAdvice: 'ìˆ˜ë¶„ ìƒíƒœ ì¢‹ì•„ìš”! ğŸ’§',
    careAdvice: ['ë‹¤ì–‘í•œ ì´ìœ ì‹ì„ ì‹œë„í•´ ë³´ì„¸ìš”', 'ìƒˆ ìŒì‹ì€ 3ì¼ ê°„ê²©ìœ¼ë¡œ í•œ ê°€ì§€ì”© ì¶”ê°€í•´ìš”', 'ìŒì‹ ì¡°ê°ì´ ë³´ì´ëŠ” ê±´ ì •ìƒì´ì—ìš”!'],
    hospitalAdvice: null,
    insight: 'ì´ìœ ì‹ ì‹œì‘ í›„ ë³€ ìƒ‰ê³¼ ì§ˆê°ì´ ë³€í•˜ëŠ” ê±´ ìì—°ìŠ¤ëŸ¬ì›Œìš”. ìŒì‹ ì¡°ê°ì´ ë³´ì´ëŠ” ê²ƒë„ 6-12ê°œì›” ì•„ê¸°ì—ê² í”í•œ ì¼ì´ì—ìš”.',
    recommendations: ['ë‹¤ì–‘í•œ ì´ìœ ì‹ ì‹œë„', 'ì•Œë ˆë¥´ê¸° ê´€ì°°'],
    warningSigns: [],
    analysisTime: getCurrentTime(),
    confidenceScore: 90
  },
  {
    status: 'normal',
    statusLabel: 'ì •ìƒ',
    description: 'ë¶„ìœ  ìˆ˜ìœ  ì•„ê¸°ì˜ ê±´ê°•í•œ ëŒ€ë³€ì´ì—ìš”.',
    friendlyHeadline: 'ë¶„ìœ ê°€ ì•„ê¸°ì—ê²Œ ì˜ ë§ì•„ìš”!',
    friendlyEmoji: 'ğŸ¼',
    color: 'í™©ê°ˆìƒ‰',
    colorHex: '#C4A35A',
    colorFriendly: 'í™©ê°ˆë³€',
    consistency: 'í˜ì´ìŠ¤íŠ¸í˜•',
    frequencyToday: 2,
    poopShape: 'ğŸŒ ë°”ë‚˜ë‚˜',
    poopShapeDesc: 'ê±´ê°•í•´ìš”',
    amount: 'ë³´í†µ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ì–‘í˜¸',
    bristolType: 4,
    hydrationAdvice: 'ìˆ˜ë¶„ ì„­ì·¨ ì¢‹ì•„ìš”! ğŸ’§',
    careAdvice: ['í˜„ì¬ ë¶„ìœ ë¥¼ ê³„ì† ìœ ì§€í•´ ì£¼ì„¸ìš”', 'ì ì • ì˜¨ë„(ì²´ì˜¨ ì •ë„)ë¡œ ìˆ˜ìœ í•´ ì£¼ì„¸ìš”', 'ìˆ˜ìœ  í›„ íŠ¸ë¦¼ì„ ì˜ ì‹œì¼œì£¼ì„¸ìš”'],
    hospitalAdvice: null,
    insight: 'ë¶„ìœ  ìˆ˜ìœ  ì•„ê¸°ì˜ ì „í˜•ì ì¸ ê±´ê°• ë³€ì´ì—ìš”. í™©ê°ˆìƒ‰ í˜ì´ìŠ¤íŠ¸ í˜•íƒœëŠ” ë¶„ìœ ê°€ ì˜ ì†Œí™”ë˜ê³  ìˆë‹¤ëŠ” ì‹ í˜¸!',
    recommendations: ['í˜„ì¬ ë¶„ìœ  ìœ ì§€', 'íŠ¸ë¦¼ ì˜ ì‹œí‚¤ê¸°'],
    warningSigns: [],
    analysisTime: getCurrentTime(),
    confidenceScore: 92
  },
  {
    status: 'caution',
    statusLabel: 'ê´€ì°° í•„ìš”',
    description: 'ê±°í’ˆì´ ì„ì¸ ë³€ì´ ê´€ì°°ë©ë‹ˆë‹¤.',
    friendlyHeadline: 'ê±°í’ˆë³€ì´ì—ìš”, ìˆ˜ìœ  ë°©ë²•ì„ í™•ì¸í•´ ë³´ì„¸ìš”',
    friendlyEmoji: 'ğŸ«§',
    color: 'ì—°ë…¸ë‘',
    colorHex: '#F0E68C',
    colorFriendly: 'ê±°í’ˆë³€',
    consistency: 'ê±°í’ˆí˜•',
    frequencyToday: 5,
    poopShape: 'ğŸ«§ ê±°í’ˆ',
    poopShapeDesc: 'ì¥ì´ ì˜ˆë¯¼í•´ìš”',
    amount: 'ë§ìŒ',
    hasMucus: false,
    hasBlood: false,
    hasUndigested: false,
    hydration: 'ë³´í†µ',
    bristolType: 6,
    hydrationAdvice: 'ìˆ˜ë¶„ ìƒíƒœëŠ” ê´œì°®ì•„ìš” ğŸ’§',
    careAdvice: ['í•œìª½ ì –ì„ ì¶©ë¶„íˆ ë¹„ìš´ í›„ ë‹¤ë¥¸ ìª½ìœ¼ë¡œ ë°”ê¿”ì£¼ì„¸ìš”', 'ì „ìœ -í›„ìœ  ë¶ˆê· í˜•ì¼ ìˆ˜ ìˆì–´ìš”', 'ìˆ˜ìœ  ìì„¸ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”'],
    hospitalAdvice: 'ê±°í’ˆë³€ì´ ê³„ì†ë˜ë©´ ìœ ë‹¹ ë¶ˆë‚´ì¦ ê²€ì‚¬ë¥¼ ìœ„í•´ ì†Œì•„ê³¼ ìƒë‹´ì„ ê¶Œí•´ìš”',
    insight: 'ê±°í’ˆì´ ì„ì¸ ë³€ì€ ì „ìœ -í›„ìœ  ë¶ˆê· í˜•ì´ë‚˜ ìœ ë‹¹ ë¶ˆë‚´ì¦ ì‹ í˜¸ì¼ ìˆ˜ ìˆì–´ìš”. í•œìª½ ì –ì„ ì¶©ë¶„íˆ ë¨¹ì¸ í›„ ë°”ê¿”ë³´ì„¸ìš”.',
    recommendations: ['í•œìª½ ì – ì¶©ë¶„íˆ ìˆ˜ìœ ', 'ì†Œì•„ê³¼ ìƒë‹´ ê³ ë ¤'],
    warningSigns: ['ê±°í’ˆ ë³€'],
    analysisTime: getCurrentTime(),
    confidenceScore: 78
  }
];

// ê¸°ì €ê·€ê°€ ì•„ë‹Œ ê²½ìš° ê²°ê³¼
const invalidResult: PoopAnalysisResult = {
  status: 'invalid',
  statusLabel: 'ì¸ì‹ ë¶ˆê°€',
  description: 'ê¸°ì €ê·€ ì‚¬ì§„ì´ ì•„ë‹™ë‹ˆë‹¤.',
  friendlyHeadline: 'ê¸°ì €ê·€ ì‚¬ì§„ì´ í•„ìš”í•´ìš”',
  friendlyEmoji: 'ğŸ“·',
  color: '-',
  colorHex: '#CCCCCC',
  colorFriendly: '-',
  consistency: '-',
  frequencyToday: 0,
  poopShape: '-',
  poopShapeDesc: '-',
  amount: 'ë³´í†µ',
  hasMucus: false,
  hasBlood: false,
  hasUndigested: false,
  hydration: 'ë³´í†µ',
  bristolType: 0,
  hydrationAdvice: '-',
  careAdvice: [],
  hospitalAdvice: null,
  insight: 'ê¸°ì €ê·€ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ ì£¼ì„¸ìš”. ë°°ë³€ì´ ë³´ì´ëŠ” ê¸°ì €ê·€ë¥¼ ì„ ëª…í•˜ê²Œ ì´¬ì˜í•´ ì£¼ì‹œë©´ ë” ì •í™•í•œ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
  recommendations: ['ê¸°ì €ê·€ ì‚¬ì§„ ë‹¤ì‹œ ì´¬ì˜', 'ë°ì€ ê³³ì—ì„œ ì´¬ì˜', 'ë°°ë³€ ë¶€ë¶„ì´ ì˜ ë³´ì´ê²Œ ì´¬ì˜'],
  warningSigns: [],
  analysisTime: getCurrentTime(),
  confidenceScore: 0
};

export async function analyzePoopImage(base64Image: string): Promise<PoopAnalysisResult> {
  // ë¶„ì„í•˜ëŠ” ê²ƒì²˜ëŸ¼ 1~2ì´ˆ ë”œë ˆì´
  await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1000));
  
  // 15% í™•ë¥ ë¡œ "ê¸°ì €ê·€ê°€ ì•„ë‹˜" ê²°ê³¼ ë°˜í™˜ (ë°ëª¨ìš©)
  if (Math.random() < 0.15) {
    return { ...invalidResult, analysisTime: getCurrentTime() };
  }
  
  // ëœë¤ ê²°ê³¼ ë°˜í™˜ (ì‹œê°„ ì—…ë°ì´íŠ¸)
  const randomIndex = Math.floor(Math.random() * mockResults.length);
  return { ...mockResults[randomIndex], analysisTime: getCurrentTime() };
}
